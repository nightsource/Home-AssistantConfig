
# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:

frontend:
  themes: !include themes.yaml
# Uncomment this if you are using SSL/TLS, running in Docker container, etc.
http:
  base_url: https://home.vferreira.pt8123
  ssl_certificate: /ssl/fullchain.pem
  ssl_key: /ssl/privkey.pem
  
google_assistant:
  project_id: haintegration-655c6
  exposed_domains:
    - switch
    - light
    
tts:
  - platform: google_translate

telegram_bot:
  - platform: polling
    api_key: !secret telegram_bot_token
    allowed_chat_ids:
      - 564913435
      
notify:
  - name: Buttler
    platform: telegram
    chat_id: 564913435

electricity:
  home:
    country: Portugal
    operator: EDP
    plan: Bi-hor√°rio - ciclo semanal
utility_meter:
  daily_energy:
    source: sensor.energia_piso_hoje
    cycle: daily
    tariffs:
      - Fora de Vazio
      - Vazio
  monthly_energy:
    source: sensor.energia_piso_hoje
    cycle: monthly
    tariffs:
      - Fora de Vazio
      - Vazio
mqtt:
  broker: !secret mqttsvr
  username: !secret mqttusr
  password: !secret mqttpss
  keepalive: 60
  discovery: true
  discovery_prefix: homeassistant
  protocol: 3.1
  birth_message:
    topic: 'hass/status'
    payload: 'online'
    retain: true
  will_message:
    topic: 'hass/status'
    payload: 'offline'
    retain: true
  
weblink:
  entities:
    - name: Router
      url: http://192.168.1.1/
    - name: Pi-hole
      url: http://192.168.1.10/
    - name: Home Assistant
      url: https://home-assistant.io

device_tracker:
  - platform: huawei_router
    host: 192.168.1.1
    username: !secret routerVDFusr
    password: !secret routerVDFpss
  - platform: nmap_tracker
    hosts: 192.168.1.0/24
switch:
  - platform: mqtt
    name: "Aquecimento piso"
    state_topic: "stat/soaquecepiso/POWER"
    command_topic: "cmnd/soaquecepiso/power"
    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
    retain: true
    
  - platform: mqtt
    name: "Aquecimento agua"
    state_topic: "stat/soaqueceagua/POWER"
    command_topic: "cmnd/soaqueceagua/power"
    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
    retain: true
    
#  - platform: mqtt
#    name: "Roomba"
#    command_topic: "roomba/commands"
#    payload_on: "start"
#    payload_off: "stop"
#  - platform: mqtt
#    name: "Roomba return home"
#    command_topic: "roomba/commands"
#    payload_on: "home"
#    payload_off: "home"
#  - platform: mqtt
#    name: "Roomba refresh status"
#    command_topic: "roomba/commands"
#    payload_on: "status"
#    payload_off: "status"
    
light:
  - platform: philips_ambilight
    name: Ambilight+Hue
    host: !secret philipstv_ip
    username: !secret philipstv_user
    password: !secret philipstv_pass
  - platform: mqtt
    name: "Luz Aquario"
    command_topic: "cmnd/SonoffluzAquario/power"
    state_topic: "stat/SonoffluzAquario/POWER"
    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
    retain: true

pi_hole:
  host: '192.168.1.10'
    
cover:
  - platform: mqtt
    name: "Portao Garagem"
    state_topic: "garageGate/state"
    command_topic: "garageGate/cmd"
    qos: 1
    #payload_open: "push"
    #payload_close: "push"
    #payload_stop: "push" 
    state_open: "ope"
    state_closed: "close"
    optimistic: true
    retain: true
    device_class: garage

# vacuum:
  # - platform: mqtt
    # name: "Roomba Ambrosio"
    # supported_features:
      # - turn_on
      # - turn_off
      # - pause
      # - stop
      # - return_home
      # - battery
      # - status
    # command_topic: "roomba/commands"
    # payload_turn_on: "start"
    # payload_turn_off: "stop"
    # payload_return_to_base: "home"
    # battery_level_topic: "roomba/battery"
    # battery_level_template: "{{ value_json }}"
    # charging_topic: "roomba/charging"
    # charging_template: "{{ value_json }}"
    
panel_iframe:
  tasmoadmin:
    title: TasmoAdmin
    icon: mdi:lightbulb-on
    url: https://home.vferreira.pt:9541
    
speedtestdotnet:
  scan_interval:
    minutes: 30
  monitored_conditions:
    - ping
    - download
    - upload
    
media_player: !include mediaplayer.yaml
sensor: !include sensor.yaml
group: !include groups.yaml
automation: !include automations.yaml
script: !include scripts.yaml
homeassistant:
  customize: !include customize.yaml
# binary_sensor:
  # - platform: mqtt
    # state_topic: dummy/floorplan/sensor
    # name: Floorplan
# homeassistant:
  # customize:    
    # binary_sensor.floorplan:
      # custom_ui_state_card: state-card-floorplan
      # config: !include floorplan.yaml
